{% extends 'flatpages/default.html' %}
{% load news_filters %)
{% block title %}
Все публикации
{% endblock title %}

{% block content %}
<div class="container mt-5">
    <h4>Поиск постов</h4>
    <form action="" method="get">
    <label for="title">Поиск по заголовку</label>
    <label>
        <input type="text" name="title" id="title">
        <input type="submit" value="Применить">
    </label>
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>№ п/п</th>
                    <th> Заголовок</th>
                    <th> Превью</th>
                    <th colspan="2">Рейтинг</th>
                </tr>
                </thead>
                <tbody>
                {% for post in posts %}
                <tr>
                    <td>{{ forloop.counter }}</td>
                    <td><a href="{% url 'post_detail' post.id %}">{{ post.title }}</a></td>
                    <td>{{ post.text|truncatechars:20 }}</td>
                    <td>{{ post.text.censor }}</td>
                    <td>{{ post.rating }}</td>
                    <td>{{ post.rating.smail }}</td>

                </tr>
                {% empty %}
                <tr>
                    <td colspan="3">
                        <div> Еще нет ни одного поста!</div>
                    </td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock content %}